version: "3.8"

services:

  electrumsv:
    container_name: electrumsv
    build:
      context: ./mainnet
      dockerfile: ./electrumsv/Dockerfile
    ports:
      - "9999:9999"
      - "8332:8332"  # node-api server (to replace bitcoind JSON-RPC)
    environment:
      NODEAPI_HOST: "0.0.0.0"
      NODEAPI_PORT: 8332
      RESTAPI_HOST: "0.0.0.0"
    volumes:
      - ./electrumsv_data:/root/.electrum-sv
    command:      
      sh -c 'python3 electrum-sv daemon -v=debug --enable-node-wallet-api -rpcpassword= -walletnotify="python3 contrib/scripts/jsonrpc_wallet_event.py %s"'
